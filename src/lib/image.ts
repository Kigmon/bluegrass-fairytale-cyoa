
export type SceneKind='arrival'|'morning'|'midday'|'afternoon'|'evening'
function rseed(s:string){let h=2166136261>>>0;for(let i=0;i<s.length;i++){h^=s.charCodeAt(i);h=Math.imul(h,16777619)}return()=>{h+=0x6D2B79F5;let t=Math.imul(h^h>>>15,1|h);t^=t+Math.imul(t^t>>>7,61|t);return((t^t>>>14)>>>0)/4294967296}}
export function svgForScene(kind:SceneKind,seed:string,caption?:string){const R=rseed(seed);const W=1024,H=576;const hills=Array.from({length:4}).map((_,i)=>({oy:H*0.5+i*30+R()*40,amp:40+R()*60,hue:120+i*10+R()*30}));const stars=Array.from({length:60}).map(()=>({x:R()*W,y:R()*H*0.6,r:0.5+R()*1.5}));const sunX=R()*W,sunY=120+R()*80;const label=caption?`<text x='32' y='540' font-size='28' font-family='ui-sans-serif,system-ui,Segoe UI,Inter' fill='white' opacity='0.9'>${caption.replace(/&/g,'&amp;')}</text>`:'';return `<svg viewBox='0 0 ${W} ${H}' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='sky' x1='0' x2='0' y1='0' y2='1'><stop offset='0%' stop-color='hsl(${kind==='evening'?265:205} 80% 65%)'/><stop offset='100%' stop-color='hsl(${kind==='evening'?320:160} 70% 40%)'/></linearGradient></defs><rect width='100%' height='100%' fill='url(#sky)'/>${stars.map(s=>`<circle cx='${s.x.toFixed(1)}' cy='${s.y.toFixed(1)}' r='${s.r.toFixed(1)}' fill='white' opacity='${(0.4+R()*0.4).toFixed(2)}'/>`).join('')}<circle cx='${sunX.toFixed(1)}' cy='${sunY.toFixed(1)}' r='${(40+R()*30).toFixed(1)}' fill='hsl(${kind==='evening'?30:50} 90% 60%)' opacity='0.7'/>${hills.map((g,i)=>{const path=Array.from({length:8}).map((_,x)=>{const px=(x/7)*W;const py=g.oy+Math.sin((x+R())*1.5)*g.amp;return `${x?'L':'M'} ${px.toFixed(1)} ${py.toFixed(1)}`}).join(' ');return `<path d='${path}' fill='none' stroke='hsl(${g.hue} 60% 25%)' stroke-width='${12-i*2}' stroke-linecap='round'/>`}).join('')}<g transform='translate(40,420)'>${kind==='morning'?"<text font-size='40' fill='white'>☕️🧁</text>":""}${kind==='midday'?"<text font-size='40' fill='white'>🥾🌿</text>":""}${kind==='afternoon'?"<text font-size='40' fill='white'>🍷🍺</text>":""}${kind==='evening'?"<text font-size='40' fill='white'>🍽️🎶</text>":""}</g>${label}</svg>`}
